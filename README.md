# 《编写可读代码的艺术》 重点笔记

## 第一章 代码应当易于理解
   - 关键思想: 代码应当易于理解
   - 代码的写法应该使别人理解它所需要的时间最小化

# 第一部分 表面层次的改进

## 第二章 把信息装到名字里
   - 关键思想：把信息装入名字中。
   - 使用专业的单词：（例如：在下载资源的情况下，使用Download 会比 Get 的命名来的好。）
   - 避免空泛的名字：（例如：像temp 除非它们有特殊理由。）
   - 使用具体的名字来更细致地描述事物： （例如：ServerCanStart()这个名字就比CanListenOnPort更不清楚）
   - 给变量名带上重要的细节：（例如：在数值为毫秒的变量上加上_ms。）
   - 为作用域大的名字采用更长的名字：（例如：不要用让人费解的一个或两个字母的名字来命名在几屏之间都可见的变量。对于存在几行之间的变量用短一点的名字更好。）
   - 有目的地使用大小写、下划线等：（例如：类变量和局部变量后面可以加载_来区分它们。）
   
## 第三章 不会误解的名字是最好的名字
   - 关键思想：要多问自己几遍: '这个名字会被别人解读成其他的含义吗？' 要仔细审视这个名字
   - 在决定使用一个名字以前，要吹毛求疵一点，想象一下你所取的名字会被误解成什么。
   - 最好的名字是不会误解的。
   - 当定义一个值的上限或者下限时，max_ 和 min_是很好的前缀（这个我也是怎么做的）。对于包含的范围，first和last是好的选择。对于包含/排除范围，
   begin和end是最好的选择，因为它们最常用。
   - 当为布尔值命名时，使用is和has这样的词来明确表示它是布尔值，避免使用反义词（例如disable_open）（这我也是怎么做的）
   - 要小心用户对特定词的期望。例如，用户期望get()或者size()是轻量（O(1)）的方法。如果是重量（O(n)或更高）的话，重命名如countSize()等

## 第四章 审美
   - 三条原则:
      1. 使用一致的布局，让读者很快就习惯这种风格
      2. 让相似的代码看上去相似
      3. 把相关的代码行分组，形成代码块
   - 如果多个代码块做相似的事情，尝试让它们有相同的剪影（何为剪影：写作手法,剪取一个大事件或大事物中的一个小片段来加以描写,这种描写的作用就是“以小见大”,其在哲学上的根据就是“通过部分获知全体”.）。
   - 把代码按‘列’对齐可以让代码更容易浏览
   - 如果在一段代码中提到A、B和C，那么不要在另一段代码中说B、C和A，选择一个有意义的顺序，并始终用这样的顺序。
   - 用空行来把大块代码分成逻辑上的‘段落’

## 第五章 该写什么样的注释
   - 关键思想：注释的目的：是为了尽量帮助读者了解和作者一样多
   - 什么地方不需要写注释：
      1. 能从代码本身中迅速地推断的事实。
      2. 用来粉饰代码（例如蹩腿的函数名）的‘拐杖式注释’ --- 应该把函数名改好
   - 你应该记录下来的想法包括：
      1. 对于为什么代码写成这样而不是那样的内在理由（‘指导性批注’）
      2. 代码中的缺陷，使用像TODO: 或者 XXX:这样的标记
      3. 常量背后的故事，为什么是这个值
   - 站在读者的立场上思考
      1. 预料到代码中哪些部分代码会让读者有疑问的地方上加上注释
      2. 为普通读者意料之外的行为加上注释
      3. 在文件/类的级别上使用‘全局观’注释来解释所有的部分是如何一起工作的
      4. 用注释来总结代码块，使读者不会迷失在细节中

## 第六章 写出言简意赅（形容言语简练而意思完整）的注释
   - 关键思想：注释应当有很高的信息/空间率
   - 当前像‘it’ 和 ‘this’ 这样的代词可能指代多个事物时，避免使用它们。
   - 尽量精确地描述函数的行为
   - 在注释中用精心挑选的输入/输出例子进行说明
   - 声明代码的高层次意图，而非明显的细节
   - 用嵌入的注释(如 Function(/*arg=*/...)) 来解释难以理解的函数参数。
   - 用含义丰富的词来使注释简洁

# 第二部分 简化循环和逻辑

## 第七章 把控制流变得易读
   - 关键思想：把条件、循环以及其他对控制流的改变做得越'自然'越好。运用一种方式使读者不用停下来重读你的代码。
   - 在写一个比较时(while (bytes_expected > bytes_received)), 把改变的值写在左边并且把更稳定的值写在右边更好一些 (while (bytes_expected > bytes_received)).
   - 你也可以重新排列if/else语句中的语句块.通常来讲，先处理正确的/简单的/有趣的情况.有时这些准则会冲突，但是当不冲突时，这是要遵循的经验法则。
   - 某些编程结构，像三目运算符（:?）、do/while循环，以及goto经常会导致代码的可读性变差。最好不要使用它们，因为总是有更整洁的代替方式。
   - 嵌套的代码块需要更加集中精力去理解。每层新的嵌套都需要读者把更多的上下文‘压人栈’。应该把它们改写成更加‘线性’的代码来避免深嵌套。
   - 通常来讲提早返回可以减少嵌套并让代码简洁。‘保护语句’（在函数顶部处理简单的情况时）尤其有用。

## 第八章 拆分超长的表达式
   - 关键思想: 把你的超长表达式拆分成更容易理解的小块
   - 引入‘解释变量’来代表较长的子表达式.（三个好处：1.它把巨大的表达式拆成小段。2.它通过用简单的名字描述子表达式来让代码文档化。3.它帮助读者识别代码中的主要概念。
   - 用德摩根定理来操作逻辑表达式--这个技术有时可以把布尔表达式用更整洁的方式重写。例如：if(!(a&&!b)) 变成 if(!a || b)。
   - 所有的if语句内不超过两个值，这是最理想情况，可能不是总能做到这样---有时需要把问题‘反向’，或者考虑目标的对立面。

## 第九章 变量与可读性
   - 减少变量，即那些妨碍的变量。通过立刻处理结果来消除‘中间结果’变量。
   - 减小每个变量的作用域，越少越好。把变量移到一个有最少代码可以看到它的地方，眼不见，心不烦。
   - 只写一次变量更好。那些只设置一次值的变量（或者const、final、常量）使得代码更加容易理解。

# 第三部分 重新组织代码

## 第十章 抽取不相关的子问题
   - 自顶向下编程：先设计高层次模块和函数，然后根据支持它们的需要来实现低层次函数。
   - 自底向上编程：尝试首先预料和解决所有的子问题，然后用这些代码来建立更高层次的组件。
   - 把一般代码和项目专有的代码分开

## 第十一章 一次只做一件事
   - 关键思想：应该把代码组织得一次只做一件事情。
   - 如果你有很难读的代码，尝试把它所做的所有任务列出来。其中一些任务可以很容易地变成单独的函数（或类）。其他的可以简单地成为一个函数中的逻辑‘段落’。具体如何拆分这些任务没有它们已经分开这个事实那么重要。难的是要准确的描述你的程序所做的所有这些小事情。

## 第十二章 把想法变成代码
   - 用自然语言描述程序然后用这个描述来帮助你写出更自然的代码。

## 第十三章 少写代码
   - 关键思想：最好读的代码就是没有代码。
   - 写越少代码越好的。每行新的代码都需要测试、写文档和维护。另外，代码库中的代码越多，它就越‘重’，而且在其上开发就越难。
   - 可以通过以下方式避免编写新代码：
      1. 从项目中消除不必要的功能，不要过度设计。
      2. 重新考虑需求，解决版本最简单的问题，只要能完成工作就行。
      3. 经常性地通读标准库的整个API，保持对它们的熟悉程度。

# 第四部分 精选话题

## 第十四章 测试与可读性
   - 关键思想：测试应当具有可读性，以便其他程序员可以舒舒服服的改变或者添加测试。
   - 在测试代码中，可读性任然很重要。如果测试的可读性很好，其结果是它们也会变得很容易写，因此大家会写更多测试。并且，如果你把事实代码设计得容易测试，代码的整个设计会变得更好。
   - 如何改进测试的几个具体要点：
      1. 每个测试最高一层应该越简明越好。最好每个测试的输入/输出可以用一行代码来描述。
      2. 如果测试失败了，它所发出的错误信息应该能让你更容易的跟踪并修正这个bug。
      3. 使用最简单的并且能够完整运用代码的测试输入。
      4. 给测试函数取一个有完整描述性的名字，以使每个测试所测到的东西很明确。不要用Test1()，而用像Test_<FunctionName>_<Siuation>这样的名字。
      5. 最重要的是，要使它易于改动和增加新的测试。
      